<c-modal [(visible)]="isVisible" (visibleChange)="onVisibleChange($event)" backdrop="static">
  <c-modal-header>
    <h5 class="modal-title">Contact Details</h5>
    <button type="button" class="btn-close" (click)="onClose()"></button>
  </c-modal-header>
  <c-modal-body>
    <div *ngIf="contact">
      <form *ngIf="isEditMode || isNew; else viewModeForm">
        <div class="mb-3">
          <label for="firstName" class="form-label">First Name</label>
          <input type="text" class="form-control" id="firstName" [(ngModel)]="contact.firstname" name="firstName">
        </div>
        <div class="mb-3">
          <label for="lastName" class="form-label">Last Name</label>
          <input type="text" class="form-control" id="lastName" [(ngModel)]="contact.lastname" name="lastName">
        </div>
        <div class="mb-3">
          <label for="email" class="form-label">Email</label>
          <input 
            type="email" 
            class="form-control" 
            id="email" 
            [(ngModel)]="contact.email" 
            name="email"
            [ngClass]="{'is-invalid': emailError}"
            (ngModelChange)="emailError = ''"
          >
          <div *ngIf="emailError" class="invalid-feedback">
            {{ emailError }}
          </div>
        </div>
        <div class="mb-3">
          <label for="phone" class="form-label">Phone</label>
          <input 
            type="text" 
            class="form-control" 
            id="phone" 
            [(ngModel)]="contact.phone" 
            name="phone"
            [ngClass]="{'is-invalid': phoneError}"
            (ngModelChange)="phoneError = ''"
          >
          <div *ngIf="phoneError" class="invalid-feedback">
            {{ phoneError }}
          </div>
        </div>
        <div class="mb-3">
          <label for="addr" class="form-label">Address</label>
          <input 
            type="text" 
            class="form-control" 
            id="addr" 
            [(ngModel)]="contact.addraddr" 
            name="addr"
            [ngClass]="{'is-invalid': addrError}"
            (ngModelChange)="addrError = ''"
          >
          <div *ngIf="addrError" class="invalid-feedback">
            {{ addrError }}
          </div>
        </div>
      </form>
      <ng-template #viewModeForm>
        <div class="mb-3">
          <label for="firstName" class="form-label">First Name</label>
          <p id="firstName">{{ contact.firstname }}</p>
        </div>
        <div class="mb-3">
          <label for="lastName" class="form-label">Last Name</label>
          <p id="lastName">{{ contact.lastname }}</p>
        </div>
        <div class="mb-3">
          <label for="email" class="form-label">Email</label>
          <p id="email">{{ contact.email }}</p>
        </div>
        <div class="mb-3">
          <label for="phone" class="form-label">Phone</label>
          <p id="phone">{{ contact.phone }}</p>
        </div>
        <div class="mb-3">
          <label for="addr" class="form-label">Address</label>
          <p id="addr">{{ contact.addraddr }}</p>
        </div>
      </ng-template>
    </div>
  </c-modal-body>
  <c-modal-footer *ngIf="isEditMode || isNew">
    <button *ngIf="isEditMode || isNew" type="button" class="btn btn-primary" (click)="save()">{{ isNew ? 'Add' : 'Save' }}</button>
    <button *ngIf="!isNew && isEditMode" type="button" class="btn btn-danger" (click)="delete()">Delete</button>
  </c-modal-footer>
  <!-- Quick Edit Button -->
  <button *ngIf="!isEditMode && !isNew" [cTooltip]="tooltipQuickEdit" cTooltipPlacement="top" class="fab-edit quick-edit btn btn-primary" (click)="toggleEditMode()">
    <i class="fas fa-pencil-alt"></i>
    <svg cIcon name="cilPencil" size="xl" title="Quick Edit Icon"></svg>
  </button>
<!-- Detail Edit Button -->
<button *ngIf="!isEditMode && !isNew" [cTooltip]="tooltipkEdit" cTooltipPlacement="top" class="fab-edit detail-edit btn btn-secondary" (click)="navigateToDetail()">
  <i class="fas fa-pencil-alt"></i>
  <svg cIcon name="cilPencil" size="xl" title="Detail Edit Icon"></svg>
</button>
</c-modal>
